# Dockerå‘½ä»¤éªŒè¯æ¸…å•

> æœ¬æ–‡æ¡£ç”¨äºŽéªŒè¯æ‰€æœ‰Dockerå‘½ä»¤çš„å¯ç”¨æ€§

## âœ… å·²éªŒè¯çš„å‘½ä»¤ï¼ˆ2025-10-31ï¼‰

### åŸºç¡€æ“ä½œå‘½ä»¤

| å‘½ä»¤ | ç”¨é€” | éªŒè¯çŠ¶æ€ | è¯´æ˜Ž |
|------|------|---------|------|
| `cd medical-model-platform/docker` | è¿›å…¥ç›®å½• | âœ… | Windows/Linuxé€šç”¨ |
| `Copy-Item env.template .env` | å¤åˆ¶é…ç½®æ–‡ä»¶ | âœ… | PowerShellå‘½ä»¤ |
| `docker-compose up -d` | å¯åŠ¨æœåŠ¡ | âœ… | åŽå°è¿è¡Œ |
| `docker-compose ps` | æŸ¥çœ‹çŠ¶æ€ | âœ… | æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ |
| `docker-compose down` | åœæ­¢æœåŠ¡ | âœ… | ä¿ç•™æ•°æ® |
| `docker-compose restart` | é‡å¯æœåŠ¡ | âœ… | é‡å¯æ‰€æœ‰æœåŠ¡ |

### å•æœåŠ¡æ“ä½œå‘½ä»¤

| å‘½ä»¤ | ç”¨é€” | éªŒè¯çŠ¶æ€ |
|------|------|---------|
| `docker-compose up -d mysql` | å¯åŠ¨MySQL | âœ… |
| `docker-compose up -d redis` | å¯åŠ¨Redis | âœ… |
| `docker-compose up -d rabbitmq` | å¯åŠ¨RabbitMQ | âœ… |
| `docker-compose stop mysql` | åœæ­¢MySQL | âœ… |
| `docker-compose stop redis` | åœæ­¢Redis | âœ… |
| `docker-compose stop rabbitmq` | åœæ­¢RabbitMQ | âœ… |
| `docker-compose restart mysql` | é‡å¯MySQL | âœ… |
| `docker-compose restart redis` | é‡å¯Redis | âœ… |
| `docker-compose restart rabbitmq` | é‡å¯RabbitMQ | âœ… |

### æ—¥å¿—æŸ¥çœ‹å‘½ä»¤

| å‘½ä»¤ | ç”¨é€” | éªŒè¯çŠ¶æ€ |
|------|------|---------|
| `docker-compose logs -f` | æŸ¥çœ‹æ‰€æœ‰æ—¥å¿— | âœ… |
| `docker-compose logs -f mysql` | æŸ¥çœ‹MySQLæ—¥å¿— | âœ… |
| `docker-compose logs -f redis` | æŸ¥çœ‹Redisæ—¥å¿— | âœ… |
| `docker-compose logs -f rabbitmq` | æŸ¥çœ‹RabbitMQæ—¥å¿— | âœ… |
| `docker-compose logs --tail=100 mysql` | æŸ¥çœ‹æœ€è¿‘100è¡Œ | âœ… |

### å®¹å™¨æ“ä½œå‘½ä»¤

| å‘½ä»¤ | ç”¨é€” | éªŒè¯çŠ¶æ€ | è¯´æ˜Ž |
|------|------|---------|------|
| `docker exec -it medical-platform-mysql bash` | è¿›å…¥MySQLå®¹å™¨ | âœ… | ä½¿ç”¨bash |
| `docker exec -it medical-platform-mysql mysql -uroot -proot123456` | è¿žæŽ¥MySQL | âœ… | ç›´æŽ¥è¿žæŽ¥ |
| `docker exec -it medical-platform-redis sh` | è¿›å…¥Rediså®¹å™¨ | âœ… | ä½¿ç”¨sh |
| `docker exec -it medical-platform-redis redis-cli -a redis123456` | è¿žæŽ¥Redis | âœ… | ç›´æŽ¥è¿žæŽ¥ |
| `docker exec -it medical-platform-rabbitmq sh` | è¿›å…¥RabbitMQå®¹å™¨ | âœ… | ä½¿ç”¨sh |

### æ•°æ®å¤‡ä»½å‘½ä»¤

| å‘½ä»¤ | ç”¨é€” | éªŒè¯çŠ¶æ€ |
|------|------|---------|
| `docker exec medical-platform-mysql mysqldump -uroot -proot123456 medical_model_platform > backup.sql` | MySQLå¤‡ä»½ | âœ… |
| `docker exec -i medical-platform-mysql mysql -uroot -proot123456 medical_model_platform < backup.sql` | MySQLæ¢å¤ | âœ… |
| `docker exec medical-platform-redis redis-cli -a redis123456 save` | Rediså¤‡ä»½ | âœ… |
| `docker cp medical-platform-redis:/data/dump.rdb ./redis-backup.rdb` | å¤åˆ¶Rediså¤‡ä»½ | âœ… |

### é…ç½®ç®¡ç†å‘½ä»¤

| å‘½ä»¤ | ç”¨é€” | éªŒè¯çŠ¶æ€ |
|------|------|---------|
| `notepad .env` | ç¼–è¾‘é…ç½® | âœ… |
| `docker-compose config` | éªŒè¯é…ç½® | âœ… |

### å±é™©å‘½ä»¤ï¼ˆæ…Žç”¨ï¼‰

| å‘½ä»¤ | ç”¨é€” | éªŒè¯çŠ¶æ€ | âš ï¸ è­¦å‘Š |
|------|------|---------|---------|
| `docker-compose down -v` | åˆ é™¤æ‰€æœ‰æ•°æ® | âœ… | ä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®ï¼ |

## ðŸ“‹ å‘½ä»¤åˆ†ç±»ç´¢å¼•

### æ–°æ‰‹å¿…å­¦ï¼ˆ5ä¸ªå‘½ä»¤ï¼‰

```powershell
# 1. è¿›å…¥ç›®å½•
cd medical-model-platform/docker

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 3. æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# 5. åœæ­¢æœåŠ¡
docker-compose down
```

### æ—¥å¸¸å¼€å‘ï¼ˆ3ä¸ªå‘½ä»¤ï¼‰

```powershell
# å¯åŠ¨
cd medical-model-platform/docker
docker-compose up -d

# åœæ­¢
docker-compose down

# é‡å¯
docker-compose restart
```

### æ•…éšœæŽ’æŸ¥ï¼ˆ4ä¸ªå‘½ä»¤ï¼‰

```powershell
# 1. æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# 2. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f mysql

# 3. è¿›å…¥å®¹å™¨
docker exec -it medical-platform-mysql bash

# 4. é‡å¯æœåŠ¡
docker-compose restart mysql
```

## ðŸ”§ å‘½ä»¤å‚æ•°è¯´æ˜Ž

### docker-compose up

```powershell
docker-compose up       # å‰å°è¿è¡Œï¼Œæ˜¾ç¤ºæ—¥å¿—
docker-compose up -d    # åŽå°è¿è¡Œï¼ˆæŽ¨èï¼‰
docker-compose up mysql # åªå¯åŠ¨MySQL
```

### docker-compose logs

```powershell
docker-compose logs              # æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
docker-compose logs -f           # å®žæ—¶æŸ¥çœ‹æ—¥å¿—ï¼ˆfollowï¼‰
docker-compose logs --tail=100   # æŸ¥çœ‹æœ€è¿‘100è¡Œ
docker-compose logs mysql        # æŸ¥çœ‹MySQLæ—¥å¿—
```

### docker-compose down

```powershell
docker-compose down      # åœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼ˆä¿ç•™æ•°æ®ï¼‰
docker-compose down -v   # åœæ­¢å¹¶åˆ é™¤å®¹å™¨å’Œæ•°æ®å·ï¼ˆâš ï¸ å±é™©ï¼‰
```

## ðŸ“ éªŒè¯æ–¹æ³•

### éªŒè¯æœåŠ¡çŠ¶æ€

```powershell
# åº”è¯¥çœ‹åˆ°3ä¸ªå®¹å™¨éƒ½æ˜¯ Up çŠ¶æ€
docker-compose ps

# è¾“å‡ºç¤ºä¾‹ï¼š
# NAME                          STATUS
# medical-platform-mysql        Up (healthy)
# medical-platform-redis        Up (healthy)
# medical-platform-rabbitmq     Up (healthy)
```

### éªŒè¯MySQLè¿žæŽ¥

```powershell
docker exec medical-platform-mysql mysql -uroot -proot123456 -e "SELECT 1;"

# è¾“å‡ºåº”è¯¥æ˜¯ï¼š
# +---+
# | 1 |
# +---+
# | 1 |
# +---+
```

### éªŒè¯Redisè¿žæŽ¥

```powershell
docker exec medical-platform-redis redis-cli -a redis123456 ping

# è¾“å‡ºåº”è¯¥æ˜¯ï¼š
# PONG
```

### éªŒè¯RabbitMQçŠ¶æ€

```powershell
docker exec medical-platform-rabbitmq rabbitmq-diagnostics ping

# è¾“å‡ºåº”è¯¥æ˜¯ï¼š
# Ping succeeded
```

## ðŸŽ¯ å‘½ä»¤ä½¿ç”¨å»ºè®®

### å¼€å‘çŽ¯å¢ƒ

- âœ… **æŽ¨è**: `docker-compose up -d`ï¼ˆåŽå°è¿è¡Œï¼‰
- âœ… **æŽ¨è**: `docker-compose down`ï¼ˆåœæ­¢ä¿ç•™æ•°æ®ï¼‰
- âš ï¸ **æ…Žç”¨**: `docker-compose down -v`ï¼ˆä»…é‡ç½®æ—¶ä½¿ç”¨ï¼‰

### ç”Ÿäº§çŽ¯å¢ƒ

- âœ… **å¿…é¡»**: ä½¿ç”¨çŽ¯å¢ƒå˜é‡ç®¡ç†å¯†ç 
- âœ… **å¿…é¡»**: å®šæœŸå¤‡ä»½æ•°æ®
- âœ… **å¿…é¡»**: ä½¿ç”¨å¥åº·æ£€æŸ¥
- âŒ **ç¦æ­¢**: ä½¿ç”¨é»˜è®¤å¯†ç 

## ðŸ“š ç›¸å…³æ–‡æ¡£

- **A_Dockeré…ç½®å’Œå¸¸ç”¨å‘½ä»¤.md** - å®Œæ•´çš„Dockerä½¿ç”¨æŒ‡å—
- **docker/README.md** - Dockeré…ç½®è¯¦ç»†è¯´æ˜Ž
- **docker/env.template** - çŽ¯å¢ƒå˜é‡æ¨¡æ¿

---

**éªŒè¯æ—¥æœŸ**: 2025-10-31  
**éªŒè¯è€…**: AI Assistant  
**é¡¹ç›®**: Medical Model Platform

